<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>í¬ëª¨ë„ë¡œ ìê¸° í‰ê°€</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .disabled-section {
            opacity: 0.5;
            pointer-events: none;
        }

        .checkbox-group {
            margin: 20px 0;
        }

        .checkbox-group hr {
            margin-top: 10px;
            margin-bottom: 20px;
            border: none;
            border-top: 2px dashed #888;
        }

        .feedback-box {
            max-height: 500px;
            overflow-y: auto;
            padding: 20px;
            margin: 0 auto 30px;
            border: 2px solid #ccc;
            border-radius: 12px;
            background-color: #fff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 90%;
        }

        .wide-textarea {
            width: 100%;
            height: 100px;
            padding: 10px;
            font-size: 16px;
            border-radius: 8px;
            border: 1px solid #ccc;
            resize: vertical;
        }

        .grid-2x2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .question-block {
            background-color: #f8f8f8;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        /* âœ… ë²„íŠ¼ UI í†µì¼ */
        .start-button-wrapper {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 30px;
            margin-bottom: 50px;
        }

        .start-button {
            padding: 15px 80px;
            font-size: 20px;
            border: none;
            border-radius: 30px;
            background-color: #a14116;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            box-shadow: 0 6px 0 #6a2b0f, 0 8px 12px rgba(0, 0, 0, 0.15);
        }

        .start-button:hover {
            background-color: #7d2f0f;
        }

        .start-button:active {
            transform: translateY(3px);
            box-shadow: 0 3px 0 #6a2b0f, 0 4px 6px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body class="bg-feedback">
    <div class="feedback-container">
        <form method="post" action="/submit_feedback">
            <!-- ìˆ¨ì€ í•„ë“œ -->
            <input type="hidden" name="task" value="{{ task }}">
            <input type="hidden" name="goal" value="{{ goal }}">
            <input type="hidden" name="workMinutes" value="{{ workMinutes }}">
            <input type="hidden" name="breakMinutes" value="{{ breakMinutes }}">
            <input type="hidden" name="repeatCount" value="{{ repeatCount }}">

            <h2>âœ¨ ì˜¤ëŠ˜ì˜ í¬ëª¨ë„ë¡œ ì„¸ì…˜ ëŒì•„ë³´ê¸° âœ¨</h2>

            <div class="checkbox-group">
                <label>
                    <input type="checkbox" id="saveToggle" name="saveStats">
                    ì´ í†µê³„ë¥¼ ë‚¨ê¸°ì§€ ì•Šê² ìŠµë‹ˆë‹¤.
                </label>
                <hr>
            </div>

            <!-- ğŸ”½ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ í‰ê°€ ë°•ìŠ¤ -->
            <div class="feedback-box">
                <div id="evaluationSection">
                    <div class="feedback-section">
                        <p><strong>1. ì´ë²ˆ ë½€ëª¨ë„ë¡œ ì„¸ì…˜ì—ì„œ ì§‘ì¤‘í•  í•µì‹¬ ì‘ì—…ì€ ë¬´ì—‡ì¸ê°€ìš”?</strong></p>
                        <p>ë‚´ê°€ í•˜ë ¤ë˜ ì‘ì—…: {{ task }}</p>
                    </div>

                    <div class="feedback-section">
                        <p><strong>2. ì´ ì‘ì—…ì´ ì™„ë£Œ ë˜ì—ˆì„ ë•Œ ì–´ë–¤ ê²°ê³¼ë¬¼ì„ ì›í•˜ë‚˜ìš”?</strong></p>
                        <p>ë‚˜ì˜ ëª©í‘œ: {{ goal }}</p>
                    </div>

                    <div class="feedback-section">
                        <p><strong>3. ì„¸ì…˜ ì„¤ì • í™•ì¸</strong></p>
                        <p>ì§‘ì¤‘ ì‹œê°„: {{ workMinutes }}ë¶„</p>
                        <p>íœ´ì‹ ì‹œê°„: {{ breakMinutes }}ë¶„</p>
                        <p>ë°˜ë³µ íšŸìˆ˜: {{ repeatCount }}íšŒ</p>
                    </div>

                    <div class="feedback-section">
                        <p><strong>4. ì´ë²ˆ ì„¸ì…˜ì€ ì–´ë• ë‚˜ìš”? ì²´í¬ë°•ìŠ¤ë¡œ ê°„ë‹¨íˆ í‰ê°€í•´ì£¼ì„¸ìš”!</strong></p>
                        <div class="grid-2x2">
                            <div class="question-block">
                                <p>âœ… ì‘ì—… ì§„í–‰ ìƒíƒœ:</p>
                                <label><input type="radio" name="progress" value="ì™„ë£Œ"> ê³„íšëŒ€ë¡œ ëª¨ë‘ ì™„ë£Œí–ˆì–´ìš”.</label><br>
                                <label><input type="radio" name="progress" value="ê±°ì˜ ì™„ë£Œ"> ê±°ì˜ ë‹¤ í–ˆì–´ìš”.</label><br>
                                <label><input type="radio" name="progress" value="ì ˆë°˜"> ì ˆë°˜ ì •ë„ ì§„í–‰í–ˆì–´ìš”.</label><br>
                                <label><input type="radio" name="progress" value="ë¯¸ì§„í–‰"> ì•„ì§ ì‹œì‘ ë‹¨ê³„ì˜ˆìš”. / ë§ì´ ë‚¨ì•˜ì–´ìš”.</label>
                            </div>
                            <div class="question-block">
                                <p>ğŸ¯ ëª©í‘œ ë‹¬ì„±ë„:</p>
                                <label><input type="radio" name="goal_achieve" value="ë‹¬ì„±"> ëª©í‘œë¥¼ ì™„ì „íˆ ë‹¬ì„±í–ˆì–´ìš”!</label><br>
                                <label><input type="radio" name="goal_achieve" value="ê±°ì˜ ë‹¬ì„±"> ëª©í‘œì— ë§ì´ ê°€ê¹Œì›Œì¡Œì–´ìš”.</label><br>
                                <label><input type="radio" name="goal_achieve" value="ì¼ë¶€ ì§„ì²™"> ì–´ëŠ ì •ë„ ì§„ì²™ì´ ìˆì—ˆì–´ìš”.</label><br>
                                <label><input type="radio" name="goal_achieve" value="ë¯¸ë‹¬ì„±"> ì•„ì‰½ì§€ë§Œ, ëª©í‘œ ë‹¬ì„±ì€ ì•„ì§ì´ì—ìš”.</label>
                            </div>
                            <div class="question-block">
                                <p>â±ï¸ ì‹œê°„ ì‚¬ìš© í‰ê°€:</p>
                                <label><input type="radio" name="time_eval" value="ì˜ˆìƒëŒ€ë¡œ"> ì˜ˆìƒí•œ íšŸìˆ˜ ì•ˆì— ë§ˆë¬´ë¦¬í–ˆì–´ìš”.</label><br>
                                <label><input type="radio" name="time_eval" value="ì¡°ê¸ˆ ì´ˆê³¼"> ì˜ˆìƒë³´ë‹¤ ì‹œê°„ì´ ì¡°ê¸ˆ ë” í•„ìš”í–ˆì–´ìš”.</label><br>
                                <label><input type="radio" name="time_eval" value="ë§ì´ ì´ˆê³¼"> ì˜ˆìƒë³´ë‹¤ ì‹œê°„ì´ í›¨ì”¬ ë§ì´ í•„ìš”í–ˆì–´ìš”.</label><br>
                                <label><input type="radio" name="time_eval" value="ë” ë¹ ë¦„"> ì˜ˆìƒë³´ë‹¤ ë¹ ë¥´ê²Œ ì™„ë£Œí–ˆì–´ìš”!</label>
                            </div>
                            <div class="question-block">
                                <p>ğŸ’¡ ì§‘ì¤‘ë„ í‰ê°€:</p>
                                <label><input type="radio" name="focus" value="ë§¤ìš° ì§‘ì¤‘"> ì•„ì£¼ ë§Œì¡±ìŠ¤ëŸ½ê²Œ ì§‘ì¤‘í–ˆì–´ìš”!</label><br>
                                <label><input type="radio" name="focus" value="ì˜ ì§‘ì¤‘"> ëŒ€ì²´ë¡œ ì§‘ì¤‘ì„ ì˜ í•œ í¸ì´ì—ìš”.</label><br>
                                <label><input type="radio" name="focus" value="ë³´í†µ"> ë³´í†µ ìˆ˜ì¤€ìœ¼ë¡œ ì§‘ì¤‘í–ˆì–´ìš”.</label><br>
                                <label><input type="radio" name="focus" value="ì§‘ì¤‘ ì–´ë ¤ì›€"> ì§‘ì¤‘í•˜ê¸° ì¡°ê¸ˆ ì–´ë ¤ì› ì–´ìš”.</label>
                            </div>
                        </div>
                    </div>

                    <div class="feedback-section" id="commentSection">
                        <p><strong>5. ì´ë²ˆ ì„¸ì…˜ì— ëŒ€í•œ ìƒê°ì´ë‚˜ ë‹¤ìŒ ê³„íšì„ ììœ ë¡­ê²Œ ë‚¨ê²¨ì£¼ì„¸ìš”! (ì„ íƒ ì‚¬í•­)</strong></p>
                        <textarea name="comment" class="wide-textarea" placeholder="ì˜ˆ: ë‚´ì¼ì€ ë³µìŠµ ìœ„ì£¼ë¡œ ë‹¤ì‹œ í•´ë³¼ ì˜ˆì •ì…ë‹ˆë‹¤."></textarea>
                    </div>
                </div>
            </div>

            <!-- âœ… ë²„íŠ¼: ë°•ìŠ¤ ì™¸ë¶€ ì¤‘ì•™ ì •ë ¬ -->
            <div class="start-button-wrapper">
                <button type="submit" class="start-button">ì²˜ìŒìœ¼ë¡œ</button>
                <button type="button" class="start-button" onclick="location.href='/stats'">í†µê³„ë³´ê¸°</button>
            </div>
        </form>
    </div>

    <script>
        const toggle = document.getElementById("saveToggle");
        const evalSection = document.getElementById("evaluationSection");
        const commentSection = document.getElementById("commentSection");

        function toggleSections() {
            const disabled = toggle.checked;
            [evalSection, commentSection].forEach(section => {
                if (disabled) section.classList.add("disabled-section");
                else section.classList.remove("disabled-section");
                section.querySelectorAll("input, textarea, select")
                       .forEach(el => el.disabled = disabled);
            });
        }

        toggle.addEventListener("change", toggleSections);

        document.addEventListener("DOMContentLoaded", () => {
            toggle.checked = false;
            toggleSections();
        });
    </script>
</body>
</html>
